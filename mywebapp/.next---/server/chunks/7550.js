"use strict";exports.id=7550,exports.ids=[7550],exports.modules={7550:(e,a,i)=>{i.d(a,{I:()=>getSiteByDomain});var n=i(5270);async function getSiteByDomain(e){let a,i,t="",{req:o}=e;o&&(t=o.headers.host);let s=!1;(t===process.env.MAIN_HOST||t==="www."+process.env.MAIN_HOST)&&(s=!0);let r=await (0,n.T)(),c=r.db(),p="",m="";if(s)a=await c.collection("users").findOne({username:"admin"}),p=t.toLowerCase(),m="admin",i=!!a.noSignup&&a.noSignup;else{if(!(a=await c.collection("users").findOne({domainName:t.toLowerCase().replace("www.","")})))return await r.close(),{props:{invalidDomain:!0}};p=a.domainName,m=a.username}return await r.close(),{props:{mainHost:s,domainName:p,owner:m,noSignup:i,captchaSiteKey:a&&a.captchaSiteKey?a.captchaSiteKey:""}}}}};