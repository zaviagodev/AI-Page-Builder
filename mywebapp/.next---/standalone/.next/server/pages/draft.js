"use strict";(()=>{var e={};e.id=880,e.ids=[880,660],e.modules={1782:(e,t,s)=>{s.r(t),s.d(t,{config:()=>_,default:()=>f,getServerSideProps:()=>P,getStaticPaths:()=>v,getStaticProps:()=>j,reportWebVitals:()=>y,routeModule:()=>H,unstable_getServerProps:()=>I,unstable_getServerSideProps:()=>E,unstable_getStaticParams:()=>C,unstable_getStaticPaths:()=>q,unstable_getStaticProps:()=>w});var r={};s.r(r),s.d(r,{default:()=>Home,getServerSideProps:()=>getServerSideProps});var n=s(7093),a=s(5244),i=s(1323),c=s(4003),o=s(9597),d=s(997),l=s(1649),u=s(6689),p=s(968),m=s.n(p),g=s(4298),h=s.n(g),x=s(5270),S=s(7550),b=s(238);function Home(e){let[t,s]=(0,u.useState)("");async function builder(){let t=await (0,l.getSession)();if(!t)return;e.mainHost&&"admin"!==t.user.name&&s("/site/"+t.user.name+"/");let r=window.location.search,n=new URLSearchParams(r).get("page");n||(n="");let a={slug:n},i=await fetch("/api/content",{method:"POST",body:JSON.stringify(a),header:{"Content-Type":"application/json"}});if(!(i=await i.json()).error){let e=i.content.html||"",t=i.content.mainCss||"",s=i.content.sectionCss||"",r=i.content.css||"",n=i.content.js||"";document.head.insertAdjacentHTML("afterbegin",`
                <link rel="stylesheet" href="/assets/minimalist-blocks/content.css" />
            `),document.head.insertAdjacentHTML("beforeend",t),document.head.insertAdjacentHTML("beforeend",s),function(e){let t=document.head.querySelector("#embedstyle");t&&t.parentNode.removeChild(t);let s=document.createElement("style");s.setAttribute("id","embedstyle"),s.innerText=e,document.head.appendChild(s)}(r),function(e){let t=document.head.querySelector("#embedscript");t&&t.parentNode.removeChild(t);let s=document.createElement("script");s.setAttribute("id","embedscript"),s.innerText=e;let r=document.createRange();document.body.appendChild(r.createContextualFragment(`<script>
            ${e}
        </script>`))}(n),function(e){let t=document.createRange(),s=document.querySelector(".is-wrapper");s.innerHTML="",s.appendChild(t.createContextualFragment(e)),s.style.opacity=1}(e),function addExternalScripts(e,t){if(0===e.length){t&&t();return}{let s=e[0],r=document.head.querySelectorAll("script");r.forEach(e=>{-1!==e.src.indexOf(s)&&e.parentNode.removeChild(e)});let n=document.createElement("script");n.onload=()=>{addExternalScripts(e.slice(1),t)},n.src=s,document.head.appendChild(n)}}(["/box/box-flex.js"])}}return((0,u.useEffect)(()=>{builder()},[]),e.invalidDomain)?d.jsx(d.Fragment,{children:"Invalid Domain"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(m(),{children:[d.jsx("base",{href:t}),d.jsx("title",{children:"View Draft"}),d.jsx("meta",{name:"description",content:"Edit Content"}),d.jsx("link",{rel:"icon",href:"/images/favicon.ico"})]}),d.jsx(b._S,{cssIncludes:[{css:"/box/box-flex.css"},{css:"/assets/scripts/glide/css/glide.core.css"},{css:"/assets/scripts/glide/css/glide.theme.css"},{css:"/assets/scripts/navbar/navbar.css"}]}),d.jsx(b._S,{cssIncludes:e.cssIncludes}),d.jsx("div",{className:"is-wrapper",style:{opacity:0}}),d.jsx(b.E2,{jsIncludes:e.jsIncludes}),d.jsx(h(),{src:"assets/scripts/glide/glide.js"}),d.jsx(h(),{src:"/assets/scripts/navbar/navbar.min.js"})]})}async function getServerSideProps(e){let t=await (0,S.I)(e),s=t.props.mainHost,r=t.props.domainName,n=t.props.owner,a=e.query.page,i=await (0,x.T)(),c=i.db(),o=await c.collection("pages").findOne({username:n,slug:a});return await i.close(),{props:{mainHost:s,domainName:r,owner:n,cssIncludes:o&&o.cssIncludes?o.cssIncludes:"",jsIncludes:o&&o.jsIncludes?o.jsIncludes:"",captchaSiteKey:t.props.captchaSiteKey}}}let f=(0,i.l)(r,"default"),j=(0,i.l)(r,"getStaticProps"),v=(0,i.l)(r,"getStaticPaths"),P=(0,i.l)(r,"getServerSideProps"),_=(0,i.l)(r,"config"),y=(0,i.l)(r,"reportWebVitals"),w=(0,i.l)(r,"unstable_getStaticProps"),q=(0,i.l)(r,"unstable_getStaticPaths"),C=(0,i.l)(r,"unstable_getStaticParams"),I=(0,i.l)(r,"unstable_getServerProps"),E=(0,i.l)(r,"unstable_getServerSideProps"),H=new n.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/draft",pathname:"/draft",bundlePath:"",filename:""},components:{App:o.default,Document:c.default},userland:r})},8013:e=>{e.exports=require("mongodb")},1649:e=>{e.exports=require("next-auth/react")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},1017:e=>{e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[6859,3441,8760,3436,4298,4003,5031,7550,238],()=>__webpack_exec__(1782));module.exports=s})();