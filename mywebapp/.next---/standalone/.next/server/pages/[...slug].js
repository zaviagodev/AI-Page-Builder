"use strict";(()=>{var e={};e.id=330,e.ids=[330,660],e.modules={4320:(e,s,t)=>{t.r(s),t.d(s,{config:()=>S,default:()=>h,getServerSideProps:()=>w,getStaticPaths:()=>I,getStaticProps:()=>f,reportWebVitals:()=>_,routeModule:()=>C,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>O,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>v});var n={};t.r(n),t.d(n,{default:()=>_slug_,getServerSideProps:()=>getServerSideProps});var a=t(7093),i=t(5244),r=t(1323),o=t(4003),l=t(9597),c=t(997),d=t(5270),u=t(968),m=t.n(u),g=t(4298),p=t.n(g),j=t(4675),x=t(238);async function getServerSideProps(e){let s,t,n,a,i,r,o;e.query.slug&&([s,t,n,a]=e.query.slug);let l="",c=!1;s?"site"===s&&t&&!n?i=t:s&&!t?(i="admin",l=s):"site"===s&&t&&n&&(i=t,l=n,a&&(c=!0)):i="admin";let u=await (0,d.T)(),m=u.db(),g="",{req:p}=e;p&&(g=p.headers.host);let x=!1;if((g===process.env.MAIN_HOST||g==="www."+process.env.MAIN_HOST)&&(x=!0),x){if(!(r=await m.collection("users").findOne({username:i}))){if("admin"!==i)return await u.close(),{props:{notFound:!0}};await (0,j.n)(),r=await m.collection("users").findOne({username:i})}if("admin"!==i&&""===l)return await u.close(),{redirect:{permanent:!1,destination:`/site/${i}/index`},props:{}}}else{if(!(r=await m.collection("users").findOne({domainName:g.toLowerCase().replace("www.","")})))return await u.close(),{props:{host:p.headers.host,mainHost:process.env.MAIN_HOST,invalidDomain:!0}};i=r.username,s&&(l=s),t&&(c=!0)}if(!i)return await u.close(),{redirect:{permanent:!1,destination:"/notfound"},props:{}};if(c||(o=await m.collection("pages_published").findOne({username:i,slug:"index"===l?"":l})),!o&&(o=await m.collection("pages_published").findOne({username:i,slug:"404"})))return await u.close(),{props:{siteOwner:i||"",favicon:r&&r.favicon?r.favicon:"",trackingId:r&&r.trackingId?r.trackingId:"",customDomainOnly:r&&r.customDomainOnly?r.customDomainOnly:"",slug:l,title:o?o.title:"",desc:o?o.desc:"",socialImage:o&&o.socialImage?o.socialImage:"",html:o?o.html:"",mainCss:o&&o.mainCss?o.mainCss:"",sectionCss:o&&o.sectionCss?o.sectionCss:"",cssIncludes:o&&o.cssIncludes?o.cssIncludes:"",jsIncludes:o&&o.jsIncludes?o.jsIncludes:"",css:o&&o.css?o.css:"",js:o&&o.js?o.js:"",notFound:!1}};if(!o&&"notfound"!==l)return await u.close(),{redirect:{permanent:!1,destination:"/notfound"},props:{}};let h="",f="",I="",w="";if(r&&o&&!o.blank){if(r.headerSlug){let e=await m.collection("pages_published").findOne({username:i,slug:r.headerSlug});e&&(h=e.html,f=e.sectionCss)}if(r.footerSlug){let e=await m.collection("pages_published").findOne({username:i,slug:r.footerSlug});e&&(I=e.html,w=e.sectionCss)}}return await u.close(),{props:{mainHost:x,siteOwner:i||"",favicon:r&&r.favicon?r.favicon:"",trackingId:r&&r.trackingId?r.trackingId:"",customDomainOnly:r&&r.customDomainOnly?r.customDomainOnly:"",slug:l,title:o?o.title:"",desc:o?o.desc:"",socialImage:o&&o.socialImage?o.socialImage:"",html:h+(o?o.html:"")+I,mainCss:o&&o.mainCss?o.mainCss:"",sectionCss:(o&&o.sectionCss?o.sectionCss:"")+f+w,cssIncludes:o&&o.cssIncludes?o.cssIncludes:"",jsIncludes:o&&o.jsIncludes?o.jsIncludes:"",css:o&&o.css?o.css:"",js:o&&o.js?o.js:"",notFound:!o}}}let _slug_=function(e){return e.invalidDomain?(0,c.jsxs)(c.Fragment,{children:[c.jsx("p",{children:"Invalid Domain"}),c.jsx("p",{children:e.host})]}):e.notFound?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(m(),{children:[c.jsx("title",{children:"404"}),c.jsx("link",{rel:"icon",href:"/images/favicon.ico"})]}),c.jsx("h1",{children:"404"}),c.jsx("p",{children:"Oops! Page Not Found."})]}):e.mainHost&&"admin"!==e.siteOwner&&e.customDomainOnly?c.jsx(c.Fragment,{}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(m(),{children:[c.jsx("title",{children:e.title}),c.jsx("meta",{name:"description",content:e.desc}),c.jsx("link",{rel:"icon",href:e.favicon?e.favicon:"/images/favicon.ico"}),e.title?c.jsx("meta",{property:"og:title",content:e.title}):null,e.desc?c.jsx("meta",{property:"og:og:description",content:e.desc}):null,e.socialImage?c.jsx("meta",{property:"og:image",content:e.socialImage}):null]}),c.jsx(x._S,{cssIncludes:[{css:"/assets/minimalist-blocks/content.css"},{css:"/box/box-flex.css"}]}),c.jsx(x.ED,{mainCss:e.mainCss,sectionCss:e.sectionCss}),c.jsx(x.rr,{html:e.html}),c.jsx(x._S,{cssIncludes:e.cssIncludes}),e.css?c.jsx(c.Fragment,{children:c.jsx("style",{dangerouslySetInnerHTML:{__html:e.css}})}):null,c.jsx("div",{className:"is-wrapper",dangerouslySetInnerHTML:{__html:e.html}}),c.jsx(p(),{src:"/box/box-flex.js"}),c.jsx(x.jM,{html:e.html}),c.jsx(x.E2,{jsIncludes:e.jsIncludes}),e.js?c.jsx(c.Fragment,{children:c.jsx(p(),{id:"jsembed",strategy:"afterInteractive",children:e.js})}):null,c.jsx(p(),{src:"https://cdnjs.cloudflare.com/ajax/libs/smoothscroll/1.4.10/SmoothScroll.min.js",strategy:"afterInteractive"}),e.trackingId?(0,c.jsxs)(c.Fragment,{children:[c.jsx(p(),{src:`https://www.googletagmanager.com/gtag/js?id=${e.trackingId}`,strategy:"afterInteractive"}),c.jsx(p(),{id:"google-analytics",strategy:"afterInteractive",children:`
                  window.dataLayer = window.dataLayer || [];
                  function gtag(){window.dataLayer.push(arguments);}
                  gtag('js', new Date());

                  gtag('config', '${e.trackingId}');
                `})]}):null]})},h=(0,r.l)(n,"default"),f=(0,r.l)(n,"getStaticProps"),I=(0,r.l)(n,"getStaticPaths"),w=(0,r.l)(n,"getServerSideProps"),S=(0,r.l)(n,"config"),_=(0,r.l)(n,"reportWebVitals"),v=(0,r.l)(n,"unstable_getStaticProps"),b=(0,r.l)(n,"unstable_getStaticPaths"),y=(0,r.l)(n,"unstable_getStaticParams"),P=(0,r.l)(n,"unstable_getServerProps"),O=(0,r.l)(n,"unstable_getServerSideProps"),C=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/[...slug]",pathname:"/[...slug]",bundlePath:"",filename:""},components:{App:l.default,Document:o.default},userland:n})},8432:e=>{e.exports=require("bcryptjs")},8013:e=>{e.exports=require("mongodb")},1649:e=>{e.exports=require("next-auth/react")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},1017:e=>{e.exports=require("path")}};var s=require("../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[6859,3441,8760,3436,4298,4003,5031,238,4675],()=>__webpack_exec__(4320));module.exports=t})();