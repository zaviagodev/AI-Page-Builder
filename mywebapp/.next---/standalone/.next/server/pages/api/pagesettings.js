"use strict";(()=>{var e={};e.id=8910,e.ids=[8910],e.modules={8013:e=>{e.exports=require("mongodb")},614:e=>{e.exports=require("next-auth/jwt")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3739:(e,t,a)=>{a.r(t),a.d(t,{config:()=>d,default:()=>c,routeModule:()=>g});var s={};a.r(s),a.d(s,{default:()=>u});var o=a(1802),n=a(7153),r=a(6249),i=a(3919),l=a(614);async function handler(e,t){if("POST"===e.method){let a;let s=await (0,l.getToken)({req:e});if(!s){t.status(200).json({ok:!0,status:401,error:"Not authenticated!"});return}let o=s.name;try{a=await (0,i.T)()}catch(e){t.status(200).json({ok:!0,status:500,error:"Connecting to the database failed."});return}let n=JSON.parse(e.body),r=n.action,u=n.slug;if("get"===r)try{let e=a.db(),s=await e.collection("pages").findOne({slug:u,username:o});await a.close(),t.status(200).json({ok:!0,status:200,content:s})}catch(e){await a.close(),t.status(500).json({ok:!0,status:500,error:"Something went wrong."})}else{let e=n.slugTarget,s=n.slug,r=n.title,i=n.desc,l=n.socialImage,u=n.blank;try{let n=a.db(),c={slug:e,username:o},d={$set:{slug:s,title:r,desc:i,socialImage:l,blank:u}};await n.collection("pages").updateOne(c,d),await n.collection("pages_published").updateOne(c,d),await a.close(),t.status(200).json({ok:!0,status:201})}catch(e){await a.close(),t.status(200).json({ok:!0,status:500,error:"Something went wrong."})}}}}let u=handler,c=(0,r.l)(s,"default"),d=(0,r.l)(s,"config"),g=new o.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/pagesettings",pathname:"/api/pagesettings",bundlePath:"",filename:""},userland:s})}};var t=require("../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[4222,3919],()=>__webpack_exec__(3739));module.exports=a})();