"use strict";(()=>{var t={};t.id=6325,t.ids=[6325],t.modules={8013:t=>{t.exports=require("mongodb")},614:t=>{t.exports=require("next-auth/jwt")},145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},220:(t,e,a)=>{a.r(e),a.d(e,{config:()=>d,default:()=>c,routeModule:()=>p});var s={};a.r(s),a.d(s,{default:()=>l});var n=a(1802),o=a(7153),r=a(6249),i=a(3919),u=a(614);async function handler(t,e){let a=await (0,u.getToken)({req:t});if(!a){e.status(200).json({ok:!0,status:401,error:"Not authenticated!"});return}let s=a.name;if("POST"!==t.method)return;let n=JSON.parse(t.body),o=n.action,r=n.slug,l=n.html,c=n.mainCss,d=n.sectionCss;if("save"===o){let t;try{t=await (0,i.T)()}catch(t){e.status(200).json({ok:!0,status:500,error:"Connecting to the database failed."});return}try{let a=t.db();await a.collection("pages").updateOne({slug:r,username:s},{$set:{html:l,mainCss:c,sectionCss:d}}),await t.close(),e.status(200).json({ok:!0,status:201})}catch(a){await t.close(),e.status(200).json({ok:!0,status:500,error:"Something went wrong."})}}else{let t;try{t=await (0,i.T)()}catch(t){e.status(200).json({ok:!0,status:500,error:"Connecting to the database failed."});return}try{let a=t.db(),n=await a.collection("pages").findOne({slug:r,username:s});await t.close(),e.status(200).json({ok:!0,status:200,content:n})}catch(a){await t.close(),e.status(500).json({ok:!0,status:500,error:"Something went wrong."})}}}let l=handler,c=(0,r.l)(s,"default"),d=(0,r.l)(s,"config"),p=new n.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/content",pathname:"/api/content",bundlePath:"",filename:""},userland:s})}};var e=require("../../webpack-api-runtime.js");e.C(t);var __webpack_exec__=t=>e(e.s=t),a=e.X(0,[4222,3919],()=>__webpack_exec__(220));module.exports=a})();