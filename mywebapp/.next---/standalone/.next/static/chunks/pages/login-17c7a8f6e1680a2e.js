(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(7644)}])},7644:function(e,r,a){"use strict";a.r(r),a.d(r,{__N_SSP:function(){return n}});var s=a(5893),t=a(5130),n=!0;r.default=function(e){return e.invalidDomain?(0,s.jsx)(s.Fragment,{children:"Invalid Domain"}):(0,s.jsx)(t.Z,{redirect:"/dashboard"})}},5130:function(e,r,a){"use strict";var s=a(5893),t=a(3299),n=a(7294),i=a(4582),o=a.n(i);r.Z=function(e){let[r,a]=(0,n.useState)(""),[i,l]=(0,n.useState)(""),[d,c]=(0,n.useState)(""),[h,u]=(0,n.useState)(!1),[m,x]=(0,n.useState)(!1),[_,w]=(0,n.useState)(!1),[b,j]=(0,n.useState)(!1),[f,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=new URLSearchParams(window.location.search);"ok"===e.get("signup")&&p(!0);let r=e.get("token");r&&handleToken(r)},[]);let handleToken=async r=>{let s=await (0,t.signIn)("credentials",{redirect:!1,token:r});s.error?(a(s.error),j(!1)):e.redirect&&(window.location.href=e.redirect)};function forgotPassword(e){e.preventDefault(),u(!h),x(!1),a("")}async function forgotHandler(e){e.preventDefault(),w(!0);let r=await fetch("/api/requesttoken",{method:"POST",body:JSON.stringify({email:i}),header:{"Content-Type":"application/json"}});(r=await r.json()).error?a(r.error):(a(""),x(!0)),w(!1)}async function submitHandler(r){r.preventDefault(),j(!0);let s=await (0,t.signIn)("credentials",{redirect:!1,email:i,password:d});s.error?(a(s.error),j(!1)):e.redirect&&(window.location.href=e.redirect)}return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:o().dashboard+" login-form",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Forgot Password"}),m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"mt-6",children:"Password reset instruction has been sent to your email."}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)("a",{className:"underline",href:"#",onClick:forgotPassword,children:"Login"})})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("form",{className:"max-w-[400px] mt-6 space-y-6",onSubmit:forgotHandler,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("input",{type:"email",id:"email",required:!0,onChange:e=>l(e.target.value)})})]}),(0,s.jsx)("div",{children:_?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("button",{type:"button",className:"button-wait w-full",disabled:"",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Reset Your Password"]})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{className:"button-primary w-full",type:"submit",children:"Reset Your Password"})})}),r?(0,s.jsx)("div",{className:"text-rose-600",children:r}):null,(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"underline",href:"#",onClick:forgotPassword,children:"Login"})})]})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{children:"Login"}),f?(0,s.jsxs)("p",{className:"mt-6 font-semibold",children:["Your account has been created successfully!",(0,s.jsx)("br",{}),"Please login here."]}):null,(0,s.jsxs)("form",{className:"mt-6 space-y-6",onSubmit:submitHandler,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("input",{type:"email",id:"email",required:!0,onChange:e=>l(e.target.value)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)("input",{type:"password",id:"password",required:!0,onChange:e=>c(e.target.value)})})]}),(0,s.jsx)("div",{children:b?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("button",{type:"button",className:"button-wait w-full",disabled:"",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Login"]})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{className:"button-primary w-full",type:"submit",children:"Login"})})}),r?(0,s.jsx)("div",{className:"text-rose-600",children:r}):null,(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"underline",href:"#",onClick:forgotPassword,children:"Forgot Password"})})]})]})})})}},4582:function(e){e.exports={dashboard:"Dashboard_dashboard__BvGi5",error:"Dashboard_error__8LlNJ",tab:"Dashboard_tab__MdpvK",tabactive:"Dashboard_tabactive__rQqqZ",modal:"Dashboard_modal__JK7nl",modal2:"Dashboard_modal2__4X49t",card:"Dashboard_card__aNrPS",onlineinfo:"Dashboard_onlineinfo__PSbE5",cardbutton:"Dashboard_cardbutton__rGPn_",more:"Dashboard_more__nLP9h",moremenu:"Dashboard_moremenu__zEdiY",active:"Dashboard_active__9N81C",menuseparator:"Dashboard_menuseparator__Bu9Hr",inputrows:"Dashboard_inputrows__fTSK1",inputrowsfooter:"Dashboard_inputrowsfooter__lewcN",user:"Dashboard_user__JkZEj"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);